<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <title>三角函数</title>
</head>

<body>
    <canvas style="width:400px;height:400px;background:#ccc"></canvas>
    <script src='until.js'></script>
    <script type="text/javascript">
        var can = document.getElementsByTagName('canvas')[0];
        var ctx = can.getContext('2d');
        var Arrow = {
            x: 0,
            y: 0,
            rotate: 0,
            color: '#ff0'
        }

        function draw(ctx) {
            ctx.save();
            ctx.translate(Arrow.x, Arrow.y);
            ctx.rotate(Arrow.rotate);
            ctx.lineWidth = 5;
            ctx.fillColor = Arrow.color;
            ctx.beginPath();
            ctx.moveTo(-50, -25);
            ctx.lineTo(0, -25);
            ctx.lineTo(0, -50);
            ctx.lineTo(50, 0);
            ctx.lineTo(0, 50);
            ctx.lineTo(0, 25);
            ctx.lineTo(-50, 25);
            ctx.closePath();
            ctx.stroke();
            ctx.fill();
            ctx.restore();
        }
        Arrow.x = can.width / 2;
        Arrow.y = can.height / 2;
        draw(ctx);
        var move = untils.getMouseMove(can);
        (function frameDraw() {
            window.requestAnimationFrame(frameDraw, can);
            ctx.clearRect(0, 0, can.width, can.height)
            var dx = move.x - Arrow.x;
            var dy = move.y - Arrow.y;
            var ang = Math.atan2(dy, dx);
            Arrow.rotate = ang;
            draw(ctx)
        })()
    </script>
</body>

</html>
